<!-- dhc3 : 2008 BARANGER Emmanuel -->
<!-- Base : DHC-2 Beaver 2004 Syd Adams -->

<airplane mass="5287" >

  <approach speed="58" aoa="6" fuel="0.2" >
    <control-setting axis="/controls/engines/engine[0]/throttle" value="0.2"/>
    <control-setting axis="/controls/engines/engine[0]/mixture" value="1.0"/>
    <control-setting axis="/controls/engines/engine[0]/propeller-pitch" value="1.0"/>
<!--    <solve-weight idx="0" weight="180"/>
    <solve-weight idx="1" weight="0"/> -->
  </approach>
  
  <cruise speed="139" alt="6000" fuel="1.0" >
    <control-setting  axis="/controls/engines/engine[0]/throttle" value="1.0"/>
    <control-setting  axis="/controls/engines/engine[0]/mixture" value="1.0"/>
    <control-setting  axis="/controls/engines/engine[0]/propeller-pitch" value="1.0"/>
<!--    <solve-weight idx="0" weight="180"/>
    <solve-weight idx="1" weight="0"/> -->
  </cruise>
  
  <cockpit x="3.748" y="0.344" z="0.618" />

  <fuselage ax="5.886" ay="0" az="-0.261" bx="-5.397" by="0" bz="-0.004" width="1.799" taper="0.75" midpoint="0.25" />

  <wing x="2.288" y="0.523" z="0.683" 
        chord="2.0" 
        taper="1.0" 
        length="8.125"
        dihedral="3.5" 
        incidence="0" 
        camber="0.05">
        <stall aoa="16" width="4" peak="1.5" />
        <flap0 start="0.036" end="0.499" lift="1.5" drag="1.6"/>
        <flap1 start="0.499" end="0.946" lift="1.2" drag="1.1"/>

        <control-input control="FLAP0" axis="/controls/flight/flaps"/>
        <control-output control="FLAP0" side="left" prop="/surface-positions/left-flap-pos-norm"/>
        <control-output control="FLAP0" side="right" prop="/surface-positions/right-flap-pos-norm"/>
        <control-output control="FLAP0" prop="/surface-positions/flap-pos-norm"/>

        <control-input control="FLAP1" split="true" axis="/controls/flight/aileron"/>
        <control-input control="FLAP1" split="true" axis="/controls/flight/aileron-trim"/>
        <control-output control="FLAP1" prop="/surface-positions/left-aileron-pos-norm" side="left"/>
        <control-output control="FLAP1" prop="/surface-positions/right-aileron-pos-norm" side="right"/> 
  </wing>
  
  <hstab x="-4.977" y="0" z="0.866"  
         chord="1.425" 
         taper=".7" 
         length="2.949">
         <stall aoa="16" width="4" peak="1.5"/>
         <flap0 start="0" end="1" lift="1.5" drag="1.2"/>
         <control-input control="FLAP0" axis="/controls/flight/elevator"/>
         <control-input control="FLAP0" axis="/controls/flight/elevator-trim"/>
         <control-output control="FLAP0" prop="/surface-positions/elevator-pos-norm"/>
  </hstab>

  <vstab x="-5.176" y="0" z="-0.136" 
         sweep="15" 
         chord="2.192" 
         taper="1" 
         length="2.261" >
         <stall aoa="14" width="3" peak="1.5" />
         <flap0  start="0" end="1"  lift="1.6" drag="1.2"/>
         <control-input control="FLAP0" axis="/controls/flight/rudder" invert="true"/>
         <control-input control="FLAP0" axis="/controls/flight/rudder-trim" invert="true"/>
         <control-output prop="/surface-positions/rudder-pos-norm" control="FLAP0" min="1" max="-1"/>
  </vstab>

  <!--
       Engine    : Pratt & Whitney R1340 S1H1G Wasp
       Propeller : Hamilton Standard 3D40-6511A-9
       MTOM      : 8000 lbs
  -->
  <propeller x="5.32" y="0" z="-0.300"
	     radius="1.65"
	     cruise-speed="120" 
	     cruise-rpm="711"
	     cruise-alt="6000" 
	     cruise-power="550"
	     takeoff-power="600"
	     takeoff-rpm="800"
	     mass="951"
	     moment="124"
	     min-rpm="200"
	     max-rpm="800"
	     fine-stop="0.8"
	     coarse-stop="2"
	     gear-ratio="0.3556">
	<piston-engine eng-rpm="2250" 
			   eng-power="600"
			   displacement="1344"
			   compression="6.0">
    		<actionpt x="6.042" y="0.0" z="-0.300"/>
    		<control-input control="THROTTLE" axis="/controls/engines/engine[0]/throttle"/>
    		<control-input control="STARTER" axis="/controls/engines/engine[0]/starter"/>
    		<control-input control="MAGNETOS" axis="/controls/engines/engine[0]/magnetos"/>
    		<control-input control="MIXTURE" axis="/controls/engines/engine[0]/mixture"/>
    		<control-input control="ADVANCE" axis="/controls/engines/engine[0]/propeller-pitch"/>
  	     </piston-engine>
  </propeller>

  <!-- Floats -->
  <gear x="3.52" y="1.64" z="-2.4" 
        compression="1.2" 
        spring = "15" 
        sfric = "0.8" 
        dfric = "0.7" 
        ignored-by-solver="1"
        on-water="1" 
        on-solid="0" 
        reduce-friction-by-extension="1.15"
        speed-planing="15" 
        spring-factor-not-planing="0.7">
  </gear>

  <gear x="3.52" y="-1.64" z="-2.4" 
        compression="1.2" 
        spring = "15" 
        sfric = "0.8" 
        dfric = "0.7" 
        ignored-by-solver="1"
        on-water="1" 
        on-solid="0" 
        reduce-friction-by-extension="1.15"
        speed-planing="15" 
        spring-factor-not-planing="0.7">
  </gear>

  <gear x="-1.0" y="1.64" z="-2.0" 
        compression="1.5" 
        spring = "15" 
        sfric = "0.85" 
        dfric = "0.75" 
        ignored-by-solver="1"
        on-water="1" 
        on-solid="0" 
        reduce-friction-by-extension="1.15"
        speed-planing="25" 
        spring-factor-not-planing="0.25">
  </gear>

  <gear x="-1.0" y="-1.64" z="-2.0" 
        compression="1.5" 
        spring = "15" 
        sfric = "0.85" 
        dfric = "0.75" 
        ignored-by-solver="1"
        on-water="1" 
        on-solid="0" 
        reduce-friction-by-extension="1.15"
        speed-planing="25" 
        spring-factor-not-planing="0.25">
  </gear>


    <!-- Retractable wheels-->
  <gear x="6.314" y="1.640" z="-2.579" 
        compression="0.2"  
        spring="2" 
        sfric="0.5" 
        dfric=".45" 
        retract-time="4" 
        initial-load="0" 
        damp="0.6">
        <control-input control="STEER" axis="/controls/flight/rudder" square="true"/>
        <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
        <control-output control="EXTEND" prop="/gear/gear[4]/position-norm"/>
        <control-speed control="EXTEND" transition-time="4"/>
  </gear>

  <gear x="6.314" y="-1.640" z="-2.579" compression="0.2" spring = "2" sfric = "0.5" dfric=".45" retract-time="4" initial-load="0" damp="0.6">
        <control-input control="STEER" axis="/controls/flight/rudder" square="true"/>
        <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
        <control-output control="EXTEND" prop="/gear/gear[5]/position-norm"/>
        <control-speed control="EXTEND" transition-time="4"/>
  </gear>

  <gear x="-2.115" y="1.640" z="-2.559" compression="0.2" spring = "3.5" sfric = "0.5" dfric=".45" retract-time="4" initial-load="1" damp="10.1">
        <control-input control="BRAKE" axis="/controls/gear/brake-parking" />
        <control-input control="BRAKE" axis="/controls/gear/brake-left" />
        <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
        <control-output control="EXTEND" prop="/gear/gear[6]/position-norm"/>
        <control-speed control="EXTEND" transition-time="4"/>
  </gear>

  <gear x="-2.115" y="-1.640" z="-2.559" compression="0.2" spring = "3.5" sfric = "0.5" dfric=".45" retract-time="4" initial-load="1" damp="10.1">
        <control-input control="BRAKE" axis="/controls/gear/brake-parking" />
        <control-input control="BRAKE" axis="/controls/gear/brake-right" />
        <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
        <control-output control="EXTEND" prop="/gear/gear[7]/position-norm"/>
        <control-speed control="EXTEND" transition-time="4"/>
  </gear>


<!-- 2 more Floats, need to be at this position in the file to do not brake the animation
    "reduce-friction-by-extension" is reduced to get steering control-->
  <gear x="-3.22" y="1.640" z="-2.0" compression="1.8" spring = "8" sfric = "0.9" dfric = "0.8" ignored-by-solver="1"
        on-water="1" on-solid="0" reduce-friction-by-extension="0.9"
        speed-planing="25" spring-factor-not-planing="3">
        <control-input axis="/controls/gear/water-rudder-pos" control="STEER" invert ="true" square="true"/>
  </gear>
  <gear x="-3.22" y="-1.640" z="-2.0" compression="1.8" spring = "8" sfric = "0.9" dfric = "0.8" ignored-by-solver="1"
        on-water="1" on-solid="0" reduce-friction-by-extension="0.9"
        speed-planing="25" spring-factor-not-planing="3">
        <control-input axis="/controls/gear/water-rudder-pos" control="STEER" invert="true" square="true"/>
  </gear>


    <!-- The Floats on solid ground-->
    <gear x="3.52" y="1.640" z="-2.4" compression="0.4" spring = "10" sfric = "1.5" dfric = "1.3" skid="1" ignored-by-solver="1">
    </gear>

    <gear x="3.52" y="-1.640" z="-2.4" compression="0.4" spring = "10" sfric = "1.5" dfric = "1.3" skid="1" ignored-by-solver="1">
    </gear>

    <gear x="0.0" y="1.640" z="-2.1" compression="0.2" spring = "10" sfric = "1.5" dfric = "1.3" skid="1" ignored-by-solver="1">
    </gear>

    <gear x="0.0" y="-1.640" z="-2.1" compression="0.2" spring = "10" sfric = "1.5" dfric = "1.3" skid="1" ignored-by-solver="1">
    </gear>

    <gear x="-3.22" y="1.640" z="-2.0" compression="0.2" spring = "10" sfric = "1.5" dfric = "1.3" skid="1" ignored-by-solver="1">
    </gear>

    <gear x="-3.22" y="-1.640" z="-2.0" compression="0.2" spring = "10" sfric = "1.5" dfric = "1.3" skid="1" ignored-by-solver="1">
    </gear>


    <!-- Retractable wheels on water-->
    <gear x="-0.22" y="1.640" z="-2.57" compression="0.2" spring = "0.1" sfric = "1" dfric="1" retract-time="4" on-water="1" on-solid="0" 
          ignored-by-solver="1" reduce-friction-by-extension="0.5">
          <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
          <control-speed control="EXTEND" transition-time="4"/>
    </gear>

    <gear x="-0.22" y="-1.640" z="-2.57" compression="0.2" spring = "0.1" sfric = "1" dfric ="1" retract-time="4" on-water="1" on-solid="0" 
          ignored-by-solver="1" reduce-friction-by-extension="0.5">
          <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
          <control-speed control="EXTEND" transition-time="4"/>
    </gear>

  <!-- Fuel: Front 61 US gal - Center 102 US gal - Rear 50 US gal -->
  <tank x="1.5" y="0" z="-0.7" capacity="265.7"/>
  <tank x="0.0" y="0" z="-0.7" capacity="611.5"/>
  <tank x="-1.5" y="0" z="-0.7" capacity="299.9"/>

  <!-- CG Théorique x=2.288 y=0 z=0.683 -->
  <ballast x="8.64" y="0.001" z="0.0" mass="600" />

<!--  <weight x="0.75" y="0.0" z="-0.5" mass-prop="/sim/weight[0]/weight-lb"/>
  <weight x="-1.0" y="0" z="-0.5" mass-prop="/sim/weight[1]/weight-lb"/> -->

</airplane>
